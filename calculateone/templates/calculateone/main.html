{% load static %}

<!DOCTYPE html>
<html lang="es">

<meta charset="utf-8">
<meta name="viewport" content="">
<meta name="description" content="">
<meta name="author">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
  integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
<link rel="stylesheet" type="text/css" href="{% static 'calculateone/css/main.css' %}">
<script src="https://unpkg.com/htmx.org@1.8.0" integrity="sha384-cZuAZ+ZbwkNRnrKi05G/fjBX+azI9DNOkNYysZ0I/X5ZFgsmMiBXgDZof30F5ofc" crossorigin="anonymous"></script>

<meta name="viewport" content="width=device-width, initial-scale=1">

<head>
</head>

<body>
  

  <script>
    document.body.addEventListener('htmx:configRequest', (event) => {
        event.detail.headers['X-CSRFToken'] = '{{ csrf_token }}';
    })
  </script>

  <form method="POST">
    {% csrf_token %}
    <div class="container my-3">

      <div class="jumbotron my-3">
        <h1 class="display-3 text-primary">Cálculo de Blindaje PET/CT</h1>
        <p>El poder del PET reside en su capacidad de capturar la
          fisiología y, por lo tanto, obtener información crucial de
          diagnóstico que no está disponible a partir de imágenes
          de alta resolución de la anatomía. La reciente explosión de interés en la PET como
          modalidad de diagnóstico por imágenes se origina en tres
          factores: radiotrazadores, detección de coincidencias y
          costo del estudio.</div>

      <div class="row g-3 justify-content-md-center">
      
        <div class="col-md-4">
          <div class="p-3 border bg-light rounded">

            <h3> <span class="badge bg-primary">Datos de la Sala</span></h3>

            <div for="org_name" class="form-label">Organización</div>
            <input class="form-control" type="text" placeholder="Hospital Santo Tomas" id="org_name">

            <div for="org_room" class="form-label">Sala</div>
            <input class="form-control" type="text" placeholder="B-456" id="org_room">

          </div>
        </div>
  
        <div class="col-md-6 p-3 border bg-light rounded"
          hx-post="{% url 'compute' %}"
          hx-trigger="change"
          hx-target="#partial_result"
          hx-swap="innerHTML">


            <h3> <span class="badge bg-primary">Datos de la Barrera</span></h3>
              <table >
                <tr>
                  <th>{{detail.barrier_id.label_tag}}</th>
                  <td>{{detail.barrier_id}}</td>
                </tr>

                <tr>
                  <th>{{barrier_form.dose.label_tag}}</th>
                  <td>{{barrier_form.dose}}</td>
                  <td class='px-3'>µSv / semana</td>
                </tr>

                <tr>
                  <th>{{barrier_form.factor.label_tag}}</th>
                  <td>{{barrier_form.factor}}</td>
                </tr>

                <tr>
                  <th>{{barrier_form.distance.label_tag}}</th>
                  <td >{{barrier_form.distance}}</td>
                  <td class="px-3">metros</td>
                </tr>
              </table>
          
        </div>
        
        
        <hr>
      </div>
  
    
      <div class="row">
  
        <div class="col-12">
          <div class="p-3 border bg-primary">Datos para el Calculo</div>
        </div>

        <nav>
          <div class="nav nav-tabs" id="nav-tab" role="tablist">
            <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true">Pet/Ct</button>
            <button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">ATAB 2</button>
            <button class="nav-link" id="nav-contact-tab" data-bs-toggle="tab" data-bs-target="#nav-contact" type="button" role="tab" aria-controls="nav-contact" aria-selected="false">TAB 3</button>
          </div>
        </nav>
        <div class="tab-content" id="nav-tabContent">
          <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab" tabindex="0">
            <div class="row mt-2 justify-content-center">

              <div class="col-md-5">
                <div class="p-3 border bg-light rounded"
                  hx-post="{% url 'compute' %}"
                  hx-trigger="change"
                  hx-target="#partial_result"
                  hx-swap="innerHTML">
                  
                  <h3> <span class="badge bg-primary">Pet</span></h3>
                  
                  <table class="center">
                    <tr>
                      <td>{{pet_form.ao.label_tag}}</td>
                      <td>{{pet_form.ao}}</td>
                      <td class='px-3'>Mbq</td>
                    </tr>
     
                    <tr>
                      <td>{{ pet_form.hr_patients.label_tag}}</td>
                      <td>{{ pet_form.hr_patients}}</td>
                      <td></td>
                    </tr>

                  
                    <tr>
                      <td>{{pet_form.study_time.label_tag}}</td>
                      <td>{{pet_form.study_time}}</td>
                      <td class='px-3'>Horas</td>
                    </tr>
                  </table>
                </div>
              </div>
        
              <div class="col-md-5">
                <div class="p-3 border bg-light rounded"
                  hx-post="{% url 'compute' %}"
                  hx-trigger="change"
                  hx-target="#partial_result"
                  hx-swap="innerHTML">
                  <h3> <span class="badge bg-primary">Ct</span></h3>
                  
                  <table >
                    <tr>
                      <td>{{ ct_form.ct_prct.label_tag }}</td>
                      <td>{{ ct_form.ct_prct }}</td>  
                    </tr>

                    <tr>
                      <td>{{ ct_form.ct_num_body.label_tag }}</td>
                      <td>{{ ct_form.ct_num_body }}</td>
                    </tr>

                    <tr>
                      <td class="text-align: left">{{ ct_form.ct_num_head.label_tag }}</td>
                      <td>{{ ct_form.ct_num_head }}</td>
                    </tr>

                  </table>
                </div>
              </div>
              
              <div id ="table">
                <table class="table caption-top my-2 md-12 table-sm">
            
                  <caption style=" text-align:center "> <span>Calculos</span> </caption>
                  <thead>
                    <tr>
                      <th class="col">Nombre Barrera</th>
                      <th class="col">Dosis Permisible</th>
                      <th class="col">Factor de Ocupacion</th>
                      <th class="col">Espesor Pet Concreto</th>
                      <th class="col">Espesor Pet Plomo</th>
                      <th class="col">Espesor Ct Concreto</th>
                      <th class="col">Espesor Ct Plomo</th>
                    </tr>
                  </thead>
            
                  <tbody class="table-group-divider" id="partial_result" style="background-color: #adb5bd; color: black">
                    
                  </tbody>

                  <tbody class="table-group-divider" id="complete_result">
                    
                  </tbody>
                </table>
              </div>
        
            </div>
          </div>
          <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab" tabindex="0">...</div>
          <div class="tab-pane fade" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab" tabindex="0">...</div>
          <div class="tab-pane fade" id="nav-disabled" role="tabpanel" aria-labelledby="nav-disabled-tab" tabindex="0">...</div>
        </div>

      </div>
  
      <div class="d-grid gap-2">
        <button type="button" class="btn btn-success"
          hx-post="{% url 'compute' %}"
          hx-trigger="click"
          hx-target="#complete_result"
          hx-swap="afterend">
        Guardar</button>
      </div>
    </div>
  </form>

</body>

</html>